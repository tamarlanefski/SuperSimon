const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/react-konva-wQM08aUr.js","assets/vendor-poeAo2-I.js"])))=>i.map(i=>d[i]);
import{j as t,B as T,r as a,a as A,D as I,b as L,d as N,e as q,f as D,T as R,I as z,g as O,h as W,i as U,k as _,l as M,m as k,n as V,o as G,p as K}from"./vendor-poeAo2-I.js";import{Line as $}from"./react-konva-wQM08aUr.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&m(r)}).observe(document,{childList:!0,subtree:!0});function l(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function m(o){if(o.ep)return;o.ep=!0;const c=l(o);fetch(o.href,c)}})();const H=e=>{const i=()=>{const l=[];for(let m=0;m<8;m++)l.push(Math.floor(Math.random()*6));e.setSequence(l)};return t.jsxs("div",{id:"containStartGame",children:[t.jsx(T,{}),t.jsx("div",{onClick:i,id:"startGame",children:"start game"})]})},J=e=>t.jsx("div",{className:"menu",children:t.jsx(H,{setSequence:e.setSequence})}),Q="modulepreload",X=function(e){return"/SuperSimon/"+e},B={},Y=function(i,l,m){let o=Promise.resolve();if(l&&l.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),d=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));o=Promise.allSettled(l.map(h=>{if(h=X(h),h in B)return;B[h]=!0;const p=h.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${x}`))return;const u=document.createElement("link");if(u.rel=p?"stylesheet":Q,p||(u.as="script"),u.crossOrigin="",u.href=h,d&&u.setAttribute("nonce",d),document.head.appendChild(u),p)return new Promise((v,E)=>{u.addEventListener("load",v),u.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(r){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=r,window.dispatchEvent(d),!d.defaultPrevented)throw r}return o.then(r=>{for(const d of r||[])d.status==="rejected"&&c(d.reason);return i().catch(c)})},Z=e=>t.jsx($,{x:e.x,y:e.y,points:[0,0,e.size,0,e.size/1.3,e.size/3,e.size-e.size/1.3,e.size/3],fill:e.fill,closed:!0,stroke:"#d2d8dd",strokeWidth:4,rotation:e.rotation,onClick:e.onClick}),ee=e=>{const[i,l]=a.useState(-1),[m,o]=a.useState(0),[c,r]=a.useState(0),[d,h]=a.useState(null),[p,x]=a.useState(null),[u,v]=a.useState(null),E=["#D72638","#FF5700","#FFC107","#4CAF50","#1E88E5","#9C27B0"],P=["#FF4D6D","#FFA333","#FFE066","#B9FBC0","#57C7FF","#E87BF8"],[S,F]=a.useState(E);a.useEffect(()=>{Y(()=>import("./react-konva-wQM08aUr.js"),__vite__mapDeps([0,1])).then(s=>{h(s.Stage),x(s.Layer),v(s.RegularPolygon)})},[]);const f="sound/soundsuccess.mp3",y="sound/soundfail.mp3",w=A.useMemo(()=>[{x:465,y:100,rotation:0,fill:S[0],sound:"sound/sound1.mp3"},{x:662,y:117,rotation:60,fill:S[1],sound:"sound/sound2.mp3"},{x:758,y:302,rotation:120,fill:S[2],sound:"sound/sound3.mp3"},{x:638,y:464,rotation:180,fill:S[3],sound:"sound/sound4.mp3"},{x:428,y:440,rotation:240,fill:S[4],sound:"sound/sound5.mp3"},{x:350,y:253,rotation:300,fill:S[5],sound:"sound/sound6.mp3"}],[S]),C=s=>{new Audio(w[s].sound).play(),F(g=>{const j=[...g];return j[s]=P[s],j}),setTimeout(()=>{F(g=>{const j=[...g];return j[s]=E[s],j})},600)};a.useEffect(()=>{if(!e.sequence||e.sequence.length===0)return;r(0),setTimeout(()=>{C(e.sequence[0]),r(1)},1e3),o(0),l(0);const s=e.animationRef.current;s&&(s.src="animation/wait.gif")},[e.sequence]);const b=s=>{if(C(s),c==1)if(e.sequence[i]===s)if(i==m){if(i==7){new Audio(f).play();const n=e.elementRef.current,g=e.animationRef.current;n&&(n.style.animationName="none",n.offsetWidth,n.style.animationName="success",n.style.animationDuration="5s",n.style.animationTimingFunction="ease-in-out",n.style.animationIterationCount="1"),g&&(g.src="animation/clapping.gif"),r(0)}else o(n=>n+1);l(0)}else l(n=>n+1);else{const n=e.animationRef.current;setTimeout(()=>{new Audio(y).play();const g=e.elementRef.current;g&&(r(0),g.style.animationName="none",g.offsetWidth,g.style.animationName="fail",g.style.animationDuration="1.7s",g.style.animationTimingFunction="ease-in-out",g.style.animationIterationCount="1"),n&&(n.src="animation/cry.gif")},600)}};return a.useEffect(()=>{r(0),e.sequence.slice(0,m+1).forEach((s,n)=>{setTimeout(()=>{C(s),n==m&&r(1)},950*(n+1))})},[m]),!d||!p||!u?t.jsx("div",{children:"Loading..."}):t.jsx(d,{width:845,height:500,children:t.jsxs(p,{children:[t.jsx(u,{x:550,y:280,sides:6,radius:250,fill:"#e9eaeb",stroke:"#d2d8dd",strokeWidth:3,rotation:30}),w.map((s,n)=>t.jsx(Z,{x:s.x,y:s.y,size:170,rotation:s.rotation,fill:s.fill,onClick:()=>b(n),sound:s.sound},n))]})})},te=e=>t.jsxs("div",{id:"wrapper",children:[t.jsx("img",{ref:e.animationRef,src:"public/animation/wait.gif"}),t.jsx("div",{ref:e.elementRef,children:"Super Simon"})]}),ne=e=>{const[i,l]=a.useState("signin"),[m,o]=a.useState("#b3b3b3"),[c,r]=a.useState("#243447"),d=a.useRef(null),[h,p]=a.useState(!1),[x,u]=a.useState({}),v=()=>{l(i==="signin"?"login":"signin");const f=m;o(c),r(f),u({})},E=f=>{f.preventDefault(),u({});const y=new FormData(f.currentTarget);if(d.current&&!d.current.checkValidity()){d.current.reportValidity();return}i=="signin"?P(y):S(y)},P=async f=>{var w,C;const y={name:(w=f.get("username"))==null?void 0:w.toString(),password:(C=f.get("password"))==null?void 0:C.toString()};try{const s=[...(await k.get("http://localhost:5000/api/users")).data],n=s.find(j=>j.name==y.name);if(!n){u({username:"שם משתמש אינו קיים"});return}if(!s.find(j=>j.password==y.password)){u({password:"סיסמה לא תואמת"});return}e.setUser(n),e.onClose()}catch(b){console.log(b)}},S=async f=>{var w,C,b,s;const y={name:(w=f.get("username"))==null?void 0:w.toString(),password:(C=f.get("password"))==null?void 0:C.toString(),email:(b=f.get("email"))==null?void 0:b.toString()};try{await k.put("http://localhost:5000/api/users/addUser",y),e.setUser(y),e.onClose()}catch(n){console.log("Error response:",(s=n.response)==null?void 0:s.data),console.log(n.message+" error:"+n),n.message.includes("password")?(alert("in pass"),u({password:n.message})):n.message.includes("name")?(alert("in name"),u({username:n.message})):u({email:"האימייל אינו חוקי או שהמשתמש כבר קיים"})}},F=()=>{p(f=>!f)};return t.jsxs(I,{open:!0,onClose:()=>{},"aria-labelledby":"login-dialog-title",fullWidth:!0,maxWidth:"xs",PaperProps:{sx:{alignItems:"center",borderRadius:3,boxShadow:6,backgroundColor:"#f9f9f9"}},children:[t.jsxs(L,{sx:{display:"flex",justifyContent:"space-evenly",alignItems:"center",gap:2,mt:2},children:[t.jsx(N,{onClick:e.onClose,fontSize:"3vw"}),t.jsx(q,{id:"signin-dialog-title",sx:{color:c,cursor:"pointer"},onClick:v,children:" signin"}),t.jsx(q,{id:"login-dialog-title",sx:{color:m,cursor:"pointer"},onClick:v,children:"login"})]}),t.jsx(D,{children:t.jsxs(L,{component:"form",noValidate:!0,onSubmit:E,ref:d,sx:{display:"flex",flexDirection:"column",gap:2,mt:2},children:[t.jsx(R,{name:"username",label:"user name",variant:"outlined",fullWidth:!0,required:!0,error:!!x.username,helperText:x.username}),t.jsx(R,{name:"password",label:"Password",variant:"outlined",type:h?"text":"password",fullWidth:!0,required:!0,error:!!x.password,helperText:x.password,InputProps:{endAdornment:t.jsx(z,{position:"end",children:t.jsx(O,{onClick:F,edge:"end",children:h?t.jsx(W,{size:20}):t.jsx(U,{size:20})})})}}),i=="login"?t.jsx(R,{name:"email",label:"email",variant:"outlined",type:"email",fullWidth:!0,required:!0,error:!!x.email,helperText:x.email}):"",t.jsx(_,{children:t.jsx(M,{type:"submit",variant:"contained",sx:{backgroundColor:"#243447"},children:i})})]})})]})},se=()=>{const[e,i]=a.useState(!1),[l,m]=a.useState({}),o=()=>{i(!0)},c=()=>{i(!1)};return t.jsxs(t.Fragment,{children:[t.jsxs(L,{sx:{position:"fixed",top:"10px",left:"10px",backgroundColor:"#f0f0f0",padding:"10px 20px",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0, 0, 0, 0.2)",display:"flex"},children:[t.jsx(V,{style:{fontSize:"4vh",paddingInlineEnd:"1.5vh"},onClick:o}),t.jsxs(G,{variant:"body1",style:{fontFamily:"cursive",top:"5px"},children:["hello ",l==null?void 0:l.name]})]}),e&&t.jsx(ne,{onClose:c,setUser:m})]})},oe=e=>{const i=a.useRef(null),l=a.useRef(null);return t.jsxs("div",{className:"main",children:[t.jsx(se,{}),t.jsx(te,{elementRef:i,animationRef:l}),t.jsx(ee,{sequence:e.sequence,elementRef:i,animationRef:l})]})};function ie(){const[e,i]=a.useState([]);return t.jsxs(t.Fragment,{children:[t.jsx(oe,{sequence:e}),t.jsx(J,{setSequence:i})]})}K.createRoot(document.getElementById("root")).render(t.jsx(a.StrictMode,{children:t.jsx(ie,{})}));
//# sourceMappingURL=index-DFnScANX.js.map
